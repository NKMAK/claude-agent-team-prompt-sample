# Skill: 設計レビュー

このスキルは、計画・設計を批判的にレビューし、品質を確保するためのガイドです。

## いつ使うか

- 実装計画やアーキテクチャ設計をレビューするとき
- 他のチームメイトの成果物を検証するとき
- 自分の設計をセルフレビューするとき

## レビュー観点（重要度順）

### 1. タスク粒度（計画レビュー）

大きすぎるタスクがないかチェックする。

```
NG: Task 1: ユーザー管理機能を実装する（5-7日）
OK: Task 1.1: ユーザー登録 (半日), Task 1.2: 認証 (半日), Task 1.3: プロフィール (4h)
```

確認ポイント：
- 各タスクは数時間〜2日以内か？
- 各タスクが独立して検証可能か？
- ボトムアップの順序になっているか？

### 2. YAGNI違反（設計レビュー）

「将来のため」の不要な機能がないかチェックする。

確認ポイント：
- 今本当に必要な機能だけになっているか？
- 過度な汎用化はないか？
- 「いつか使うかも」で追加されたものはないか？

### 3. 過度な抽象化（設計レビュー）

不要なパターンや抽象クラスがないかチェックする。

確認ポイント：
- 不要なBaseClass, AbstractService, GenericRepository等がないか？
- シンプルに書けるのに複雑なパターンが適用されていないか？

### 4. 1ファイル1責任（設計レビュー）

ファイルに機能が詰まりすぎていないかチェックする。

確認ポイント：
- 各ファイルの責任が1つに絞られているか？
- ファイルサイズが200-300行を超えていないか？

## レビューの進め方

1. **まず全体を俯瞰する**: 計画・設計の全体像を把握
2. **重要度順にチェック**: タスク粒度 → YAGNI → 抽象化 → 責任分離
3. **問題を発見したらユーザーに確認**: 自動修正ではなく、選択肢を提示
4. **代替案を必ず添える**: 「ダメ」だけでなく「こうすればいい」を示す

## 問題発見時のフォーマット

問題を発見した場合、以下のフォーマットでユーザーに確認する：

```
### 問題: [問題の概要]
- **現状**: [現在の設計/計画]
- **懸念**: [なぜ問題か]
- **推奨**: [改善案]
- **影響**: [改善した場合の効果]

対応しますか？
- はい、修正する
- いいえ、現状維持（理由があれば）
- 別の方法で対応する
```

## 成果物フォーマット

以下のMarkdownフォーマットで `review-doc.md` を出力する：

```markdown
# レビューレポート: [機能名]

## 総合評価
- **判定**: 承認 / 条件付き承認 / 再検討推奨
- **重大な懸念**: あり / なし

## プランレビュー

### タスク粒度
- 良い点 / 懸念点 / 重大な問題

### 開発順序
- 良い点 / 懸念点 / 重大な問題

## 設計レビュー

### YAGNI
- 良い点 / 懸念点 / 重大な問題

### 過度な抽象化
- 良い点 / 懸念点 / 重大な問題

### 1ファイル1責任
- 良い点 / 懸念点 / 重大な問題

### 保守性 / セキュリティ / パフォーマンス
- 良い点 / 懸念点

## 推奨アクション
### 高優先度（実装前に必須）
1. [アクション] → ユーザー確認: [はい/いいえ/別の方法]

### 中優先度（実装中に対応）
1. [アクション]

### 低優先度（余裕があれば）
1. [アクション]
```

## レビュー時の心構え

- 建設的な批判をする（攻撃的にならない）
- 具体的な代替案を示す
- 品質とシンプルさに妥協しない
- 問題を発見したら**必ずユーザーに確認**（自動修正しない）
