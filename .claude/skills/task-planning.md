# Skill: タスク計画

このスキルは、要件を実装可能なタスクに分解し、実行順序と依存関係を明確にした実装計画を作成するためのガイドです。

## いつ使うか

- 要件が確定し、実装計画を立てる必要があるとき
- タスクの分解・順序付けが必要なとき
- チームメイトに実装計画を提供する必要があるとき

## タスク分解のルール

### 適切なタスクサイズ

- **大きすぎる（NG）**: 1週間以上 → さらに分割する
- **小さすぎる（NG）**: 30分未満 → 統合を検討する
- **適切**: 数時間〜2日程度で完了するタスク

### タスクの命名

動詞で始め、具体的なファイル名やコンポーネント名を含める。

**良い例**: `backend/api/users.py に POST /api/users エンドポイントを実装する`
**悪い例**: `ユーザー機能を作る`

## 開発順序の原則: ボトムアップ

タスクは**下層から上層**へ、**常に検証可能な状態**を保ちながら実装する。

```
1. 基盤・ユーティリティ: 共通関数やヘルパー
2. データモデル: 型定義、スキーマ
3. ビジネスロジック: コア処理（独立してテスト可能）
4. API/データアクセス層: DB・外部API連携
5. コンポーネント: UI（ビジネスロジックを利用）
6. ページ/統合: 各コンポーネントを組み合わせ
```

### 避けるべきパターン

- まだ実装されていない関数を呼び出すコードを書く
- 未実装の機能に依存する実装
- console.log() でエラーを誤魔化す

### モック/スタブの活用

外部依存がある場合：
1. モック/スタブを先に実装する
2. スタブを使ってUI等を実装・検証する
3. 実際のAPIを実装する
4. スタブを実API呼び出しに置き換える

## 成果物フォーマット

以下のMarkdownフォーマットで `plan-doc.md` を出力する：

```markdown
# 実装プラン: [機能名]

## 概要
- **開発順序の方針**: ボトムアップ（下層から上層）
- **主なリスク**: [主要なリスク]

## フェーズ別タスク

### Phase 1: [フェーズ名]
**目的**: [達成すること]

#### Task 1.1: [タスク名]
- **依存**: [前提タスク、またはなし]
- **優先度**: High / Medium / Low
- **見積もり**: [X時間 ~ Y時間]
- **完了条件**:
  - [ ] [具体的な条件]
  - [ ] 動作検証が完了している
- **影響ファイル**:
  - 新規: `path/to/file`
  - 修正: `path/to/file`

## 依存関係図
Phase 1 → Phase 2 → Phase 3 ...

## 検証ポイント
- Task X完了時: [確認内容]

## リスク管理
| リスク | 影響 | 軽減策 |
|-------|------|-------|
| [リスク] | High/Medium/Low | [対策] |
```

## チェックリスト

計画を出す前に確認：
- [ ] すべての要件がタスクに落とし込まれているか？
- [ ] タスクの粒度は適切か？（数時間〜2日）
- [ ] タスクは下層から上層への順序になっているか？
- [ ] 各タスク完了時点で動作検証が可能か？
- [ ] 未実装の機能に依存するタスクがないか？
- [ ] 依存関係は正しいか？循環依存はないか？
- [ ] モック/スタブが必要な場合、先に実装する計画か？
